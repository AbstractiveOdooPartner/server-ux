<?xml version="1.0" encoding="UTF-8"?>
<templates>

  <t t-name="tier.validation.ReviewMenuPreview" owl="1">
    <t t-if="Object.keys(props.reviews).length === 0">
      <div class="dropdown-item-text text-center o_no_activity">
        <span>No reviews to do.</span>
      </div>
    </t>
    <t t-foreach="props.reviews" t-as="review" t-key="review_key">
      <div
        class="o_mail_preview"
        t-att-data-res_model="review.model"
        t-att-data-model_name="review.name"
      >
        <div class="o_mail_preview_image o_mail_preview_app">
          <img t-att-src="review.icon" alt="Review" />
        </div>
        <div class="o_preview_info">
          <div class="o_preview_title">
            <span class="o_preview_name">
              <t t-esc="review.name" />
            </span>
            <div
              t-if="review.actions"
              class="o_mail_activity_action_buttons"
            >
              <t t-foreach="review.actions" t-as="action" t-key="action_key">
                <button
                  type="button"
                  t-att-title="action.name"
                  t-att-class="'o_mail_activity_action btn btn-link fa ' + action.icon"
                  t-att-data-action_xmlid="action.action_xmlid"
                  t-att-data-res_model="review.model"
                  t-att-data-model_name="review.name"
                ></button>
              </t>
            </div>
          </div>
          <div>
            <button
              t-if="review.pending_count"
              type="button"
              class="btn btn-link o_activity_filter_button mr16"
              t-att-data-res_model="review.model"
              t-att-data-model_name="review.name"
              data-filter='pending_count'
            >
              <t t-esc="review.pending_count" />
              Pending
            </button>
            <span t-if="!review.pending_count" class="o_no_activity mr16">
              0 Pending
            </span>
          </div>
        </div>
      </div>
    </t>
  </t>

  <t t-name="tier.validation.ReviewMenu" owl="1">
    <div class="o_mail_systray_item dropdown" t-att-class="{'o_no_notification': !state.reviewCounter}" >
      <a
        class="o-dropdown dropdown-toggle o-no-caret"
        data-toggle="dropdown"
        data-display="static"
        aria-expanded="false"
        aria-haspopup="true"
        title="Reviews"
        href="#"
        role="button"
      >
        <i class="fa fa-pencil-square-o" role="img" aria-label="Activities" />
        <span class="o_notification_counter badge badge-pill" t-out="state.reviewCounter"/>
      </a>
      <div
        class="o_mail_systray_dropdown dropdown-menu dropdown-menu-right d-flex"
        role="menu"
      >
        <ReviewMenuPreview reviews="state.reviews" />
      </div>
    </div>
  </t>

</templates>
